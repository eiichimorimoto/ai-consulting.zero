# メールが届かない - すぐに解決する方法

## 🚀 最も簡単な解決方法（推奨）

開発環境では、メール確認を無効にすることで、すぐにテストできます：

### ステップ1: Supabaseダッシュボードを開く

1. [Supabaseダッシュボード](https://supabase.com/dashboard) にアクセス
2. プロジェクト「ai^consulting-zero」を選択

### ステップ2: メール確認を無効にする

1. 左メニューから「Authentication」→「Settings」を開く
2. 「Email Auth」セクションをスクロール
3. 「Enable email confirmations」の**トグルスイッチをOFF（無効）**にする
4. 下にスクロールして「Save」をクリック

### ステップ3: 確認

これで、サインアップ後すぐにログインできるようになります。

---

## 📧 メール送信を有効にする場合

メール確認が必要な場合は、以下を確認してください：

### 1. メール送信が有効か確認

1. 「Authentication」→「Providers」を開く
2. 「Email」が**Enabled（有効）**になっているか確認
3. 無効の場合は有効にして「Save」

### 2. Site URLとRedirect URLsを設定

1. 「Authentication」→「URL Configuration」を開く
2. **Site URL**を設定：
   - 開発環境: `http://localhost:3000`
   - 本番環境: 実際のドメイン（例: `https://yourdomain.com`）
3. **Redirect URLs**に以下を追加：
   ```
   http://localhost:3000/auth/callback
   http://localhost:3000/auth/complete-profile
   http://localhost:3000/**
   ```
4. 「Save」をクリック

### 3. メールテンプレートを設定

1. 「Authentication」→「Email Templates」を開く
2. 「Confirm signup」テンプレートを選択
3. テンプレートが空の場合は、`supabase/email-templates.md`の内容をコピー＆ペースト
4. 「Save」をクリック

### 4. メール送信ログを確認

1. 「Logs」→「Auth Logs」を開く
2. サインアップ時のログを確認
3. エラーログがないか確認

### 5. スパムフォルダを確認

- メールがスパムフォルダに入っていないか確認
- Gmailの場合、「すべてのメール」フォルダも確認

### 6. 手動でメール確認する（緊急時）

メールが届かない場合：

1. 「Authentication」→「Users」を開く
2. 対象のユーザーを選択
3. 「Actions」→「Confirm email」をクリックして手動で確認
4. これでメール確認をスキップしてログインできます

---

## 🔍 よくある問題

### 問題1: Supabaseの無料プランの制限

**症状**: メールが届かない、または遅延する

**解決方法**: 
- 1時間あたりのメール送信数に制限があります
- しばらく待ってから再試行
- または、メール確認を無効にする（開発環境の場合）

### 問題2: メールアドレスが無効

**症状**: メールが届かない

**解決方法**:
- 実際に存在するメールアドレスを使用してください
- `test@example.com` のようなダミーアドレスは届きません
- Gmail、Outlook、Yahooメールなどの実際のメールアドレスを使用

### 問題3: Site URLが設定されていない

**症状**: メール内のリンクが動作しない

**解決方法**:
- 「Authentication」→「URL Configuration」でSite URLを設定

---

## 💡 開発環境での推奨設定

**開発中は以下を推奨します：**

1. ✅ メール確認を無効にする
   - テストが簡単
   - サインアップ後すぐにログイン可能

2. ✅ 実際のメールアドレスを使用
   - 本番環境に近い状態でテスト可能

---

## 📝 チェックリスト

以下の項目を確認してください：

- [ ] 「Authentication」→「Settings」で「Enable email confirmations」が設定されている
- [ ] 「Authentication」→「Providers」で「Email」がEnabled
- [ ] 「Authentication」→「URL Configuration」でSite URLが設定されている
- [ ] 「Authentication」→「URL Configuration」でRedirect URLsが設定されている
- [ ] 「Authentication」→「Email Templates」で「Confirm signup」テンプレートが設定されている
- [ ] スパムフォルダを確認
- [ ] 実際のメールアドレスを使用している

---

## 🆘 それでも解決しない場合

1. Supabaseダッシュボードの「Logs」→「Auth Logs」でエラーを確認
2. ブラウザのコンソール（F12）でエラーを確認
3. ユーザーを手動で確認（「Authentication」→「Users」→「Actions」→「Confirm email」）

