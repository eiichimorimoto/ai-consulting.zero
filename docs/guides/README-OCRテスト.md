# OCR機能テスト方法

## 🧪 OCRテストスクリプトの実行

名刺OCR機能が正しく動作しているか確認するためのテストスクリプトを作成しました。

### 使い方

```bash
npm run test-ocr <画像またはPDFファイルのパス>
```

### 例

```bash
# 画像ファイルをテスト
npm run test-ocr ./public/名刺サンプル.jpg

# PDFファイルをテスト
npm run test-ocr ./public/名刺サンプル.pdf
```

### テストスクリプトの機能

- ✅ Anthropic Claude APIへの接続確認
- ✅ Base64エンコード処理の確認
- ✅ OCR処理の実行
- ✅ 抽出された情報の表示
- ✅ 処理時間の測定

### 出力例

```
🧪 OCRテストを開始します...
📁 画像ファイル: ./sample.jpg
✅ APIキーが設定されています
✅ 画像をBase64に変換しました
   Base64サイズ: 12345 文字
📄 MIMEタイプ: image/jpeg
🔗 Anthropic Claude APIに接続中...
✅ OCR処理が完了しました！
⏱️  処理時間: 2345 ms

📋 抽出された情報:
==========================================
{
  "fullName": "田中 一郎",
  "position": "営業部長",
  "department": "営業部",
  "email": "tanaka@example.com",
  ...
}
==========================================

✅ テスト完了
```

## 📄 PDF対応

名刺OCR機能は以下のファイル形式に対応しています：

- **画像形式**: JPEG, PNG, GIF, WebP
- **PDF形式**: PDF（名刺がスキャンされたPDF）

### 使用方法

1. 名刺登録画面で画像またはPDFをアップロード
2. OCR処理が自動的に実行されます
3. 抽出された情報がフォームに自動入力されます

## 🔍 トラブルシューティング

### APIキーが設定されていない場合

```
❌ ANTHROPIC_API_KEY環境変数が設定されていません
```

`.env.local` に `ANTHROPIC_API_KEY` を設定してください。

### ファイルが見つからない場合

```
❌ ファイルが見つかりません: ./sample.jpg
```

ファイルパスが正しいか確認してください。

### OCR処理が失敗する場合

```
❌ OCR処理でエラーが発生しました
```

- インターネット接続を確認
- APIキーが有効か確認
- ファイルサイズが大きすぎないか確認（推奨: 10MB以下）


