# Dify最新バージョン調査レポート

> 調査日: 2026-01-26  
> 調査者: AI Assistant

---

## 📊 調査結果サマリー

### 最新バージョン情報

| 項目 | 情報 |
|------|------|
| **最新安定版** | **v1.11.4** (2025年1月15日リリース) |
| **最新メジャー機能版** | v1.11.0 (2025年12月11日) |
| **現在のプロジェクト対応** | v1.9.0+ / v2.0.0-beta.1+ |

---

## 🔍 バージョン詳細

### v1.11.4 (最新 - 2025年1月15日)

**セキュリティ更新**:
- Node.js 24.13.0+ 必須（AsyncLocalStorage/async_hooks DoS CVE対策）
- セルフホスト環境ではNode.jsのアップグレードが必要

**バグ修正**:
- ログイン後のリダイレクト修正
- `id`と`message_id`の欠落問題を修正
- 未定義プロパティの分割代入エラーを修正

### v1.11.3 (2025年1月13日)

**新機能**:
- MCP Tool拡張（`embeddedResource`サポート、直接表示）
- ドキュメントバッチ操作に再インデックス機能追加
- AgentMaxIterationError追加
- OAuth統合（`oauth_new_user`フラグ）
- PDFからの画像抽出改善
- アーカイブストレージクライアント追加

**パフォーマンス改善**:
- Redisキャッシュ削除のパイプライン最適化
- 高負荷時のメモリリーク防止
- UIレンダリング最適化

### v1.11.0 (2025年12月11日) - マルチモーダル知識ベース

**主要機能**:
- **マルチモーダル知識ベース**: テキスト+画像の理解
  - 自動画像抽出（Markdown画像、JPG/PNG/GIF ≤ 2MB）
  - マルチモーダル埋め込みモデル対応（AWS Bedrock, Google Vertex AI, Jina, Tongyi）
  - テキスト↔画像、画像↔画像の検索対応

**その他の機能**:
- Zen Mode（集中編集モード、`cmd + k`）
- WorkflowTool「Open Workflow」ショートカット
- Start Node JSON Schema検証
- Admin API Keys CSRFバイパス

**パフォーマンス**:
- GraphEngineの一時停止/再開処理改善
- 自動ストレージ権限修復（init container）
- Redisキャッシュによるツールプロバイダーリスト高速化
- Milvus 2.6.0アップグレード

### v1.10.1 (2025年11月26日) - MySQLサポート

**主要機能**:
- **MySQL対応**: PostgreSQL / MySQL / OceanBase完全サポート
  - `DB_TYPE`設定オプション
  - MySQL JSON / LONGTEXT / UUID / インデックス差異対応
  - クロスDB SQLヘルパー

**パフォーマンス**:
- ワークフローエディターの大幅なパフォーマンス向上
  - ノードあたりの検証スキャン削減
  - 不要な再レンダリング削減
  - ~50ノードでラグ → ~200ノードでもスムーズ

### v1.10.0 (2025年11月13日) - イベント駆動ワークフロー

**主要機能**:
- **トリガー機能**: イベント駆動ワークフロー
  - **Schedule**: 時間ベーストリガー
  - **SaaS Integration Event**: 外部SaaSプラットフォーム（Slack, GitHub, Linear等）
  - **Webhook**: HTTPコールバック

**その他の機能**:
- MCP Tool拡張（Audio Content Support）
- ワークフロー一時停止/再開機能
- 構造化出力のストリーミング対応

---

## 🔄 現在のプロジェクトとの比較

### 現在の実装状況

**ドキュメント記載** (`app/api/dify/context/route.ts`):
```typescript
supportedDifyVersions: ['v1.9.0+', 'v2.0.0-beta.1+']
```

**実装されている機能**:
- ✅ 基本コンテキスト取得（プロフィール、会社情報、Web情報、名刺情報）
- ✅ 新規案件/継続案件の判定
- ✅ 会話履歴取得（継続案件のみ）
- ✅ Difyワークフロー呼び出し

**未実装の機能**:
- ❌ マルチモーダル知識ベース（v1.11.0）
- ❌ トリガー機能（v1.10.0）
- ❌ MySQLサポート（v1.10.1）
- ❌ ワークフロー一時停止/再開（v1.9.2+）

---

## 📋 推奨事項

### 1. バージョンアップデートの検討

**現状**: v1.9.0+ / v2.0.0-beta.1+ をサポート  
**最新**: v1.11.4

**推奨アクション**:
- ✅ **v1.11.4へのアップグレードを推奨**
- セキュリティ修正が含まれているため
- 後方互換性は維持されている（v1.9.0+）

### 2. 新機能の活用検討

#### 優先度: 高
1. **マルチモーダル知識ベース（v1.11.0）**
   - 添付ファイル（画像）の処理改善に活用可能
   - 初期情報送信仕様書の実装で活用

2. **ワークフロー一時停止/再開（v1.9.2+）**
   - 長時間実行されるワークフローの制御改善

#### 優先度: 中
3. **トリガー機能（v1.10.0）**
   - 将来的な自動化機能の実装に活用

4. **MySQLサポート（v1.10.1）**
   - データベース選択肢の拡大（現状PostgreSQL使用）

### 3. API仕様の確認

**現在のAPI実装**:
- `/api/dify/context`: コンテキスト取得
- `/api/dify/chat`: チャット送信

**最新API仕様**:
- 基本的なAPI構造は変更なし
- マルチモーダル対応のため、ファイルアップロードAPIの拡張あり

---

## 🔧 アップグレード手順（参考）

### Docker Compose環境の場合

```bash
# 1. バックアップ
cd docker
cp docker-compose.yaml docker-compose.yaml.$(date +%s).bak

# 2. 最新コード取得
git checkout main
git pull origin main

# 3. サービス停止
docker compose down

# 4. データバックアップ
tar -cvf volumes-$(date +%s).tgz volumes

# 5. サービス起動
docker compose up -d
```

### ソースコードデプロイの場合

```bash
# 1. サービス停止（API, Worker, Web）

# 2. 最新コード取得
git checkout 1.11.4

# 3. 依存関係更新
cd api
uv sync

# 4. マイグレーション実行
uv run flask db upgrade

# 5. サービス再起動
```

---

## 📚 参考資料

- **GitHubリリース**: https://github.com/langgenius/dify/releases
- **公式ドキュメント**: https://docs.dify.ai/
- **Changelog**: https://github.com/langgenius/dify/releases

---

## ✅ 結論

1. **最新バージョン**: v1.11.4（2025年1月15日）
2. **現在のサポート**: v1.9.0+ / v2.0.0-beta.1+（互換性あり）
3. **推奨**: v1.11.4へのアップグレード（セキュリティ修正含む）
4. **新機能活用**: マルチモーダル知識ベースを初期情報送信仕様書の実装で活用可能

---

**次回アクション**:
- Difyワークフロー環境のバージョン確認
- v1.11.4へのアップグレード計画
- マルチモーダル知識ベース機能の実装検討
