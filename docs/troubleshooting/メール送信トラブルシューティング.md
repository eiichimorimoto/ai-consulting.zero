# メール送信トラブルシューティング - 簡易チェックリスト

## ⚡ 即座に確認すべき項目

### 1. Supabaseダッシュボードで確認

1. **プロバイダーの有効化**
   - 「Authentication」→「Providers」を開く
   - 「Email」が **Enabled（有効）** になっているか確認
   - 無効の場合は有効にして「Save」

2. **メール確認の設定**
   - 「Authentication」→「Settings」を開く
   - 「Email Auth」セクションで「Enable email confirmations」を確認
   - 開発環境では無効にしても可（サインアップ後すぐログイン可能）

3. **URL設定**
   - 「Authentication」→「URL Configuration」を開く
   - **Site URL**: `http://localhost:3000`（開発環境の場合）
   - **Redirect URLs** に以下を追加：
     - `http://localhost:3000/auth/callback`
     - `http://localhost:3000/auth/complete-profile`
     - `http://localhost:3000/**`（ワイルドカードでも可）

4. **メールテンプレート**
   - 「Authentication」→「Email Templates」を開く
   - 「Confirm signup」テンプレートが空でないか確認
   - 空の場合は、`supabase/email-templates.md` の内容をコピー

### 2. メール送信ログの確認

1. Supabaseダッシュボードで「Logs」→「Auth Logs」を開く
2. サインアップ後のログを確認
3. メール送信のエラーログがあるか確認

### 3. ユーザーの状態確認

1. 「Authentication」→「Users」を開く
2. 作成したユーザーを選択
3. 「Email confirmed」が `false` の場合、メール確認が必要
4. 「Actions」→「Send confirmation email」で手動送信を試す

## 🔧 開発環境での推奨設定

### オプション1: メール確認を無効にする（簡単）

1. 「Authentication」→「Settings」を開く
2. 「Email Auth」セクションで「Enable email confirmations」を**無効**にする
3. 「Save」をクリック

**メリット**: サインアップ後すぐにログインできる

### オプション2: 実際のメールを送信する

1. 実際に存在するメールアドレスを使用（Gmail、Outlookなど）
2. スパムフォルダも確認
3. メール送信の制限に注意（無料プランでは1時間あたりの制限あり）

## 🚨 よくある問題

### 問題1: メールがスパムフォルダに入っている
- ✅ スパムフォルダを確認
- ✅ Gmailの場合、「すべてのメール」も確認

### 問題2: メール送信の制限に達している
- ✅ しばらく待ってから再試行
- ✅ Supabaseの無料プランでは制限があります

### 問題3: 無効なメールアドレスを使用している
- ✅ 実際に存在するメールアドレスを使用
- ✅ `test@example.com` のようなダミーアドレスは届きません

### 問題4: Site URLが設定されていない
- ✅ 「Authentication」→「URL Configuration」で設定

## 📝 緊急時の対処法

メールが届かない場合、以下の方法で手動確認できます：

1. Supabaseダッシュボードで「Authentication」→「Users」を開く
2. 対象のユーザーを選択
3. 「Actions」→「Confirm email」をクリックして手動で確認

これでメール確認をスキップしてログインできます。


