/**
 * コンサルティング機能の定数
 * 
 * Start画面およびコンサルティング関連コンポーネントで使用される定数
 * 
 * @module lib/consulting/constants
 */

/**
 * 同時に開けるセッションタブの最大数
 */
export const MAX_OPEN_TABS = 5;

/**
 * STEP（step_round）1〜5 の表示タイトル。ステップ終了レポートのタイトル等で使用。
 * start/page の steps と一致させる。
 */
export const STEP_TITLES: readonly [string, string, string, string, string] = [
  '課題のヒアリング',
  '現状分析',
  '解決策の提案',
  '実行計画の策定',
  'レポート作成',
];

/**
 * 各STEPでDifyに渡す「このステップの目的」。
 * プロンプトで「今はSTEP N（〇〇）なので、△△のように振る舞う」と参照する用。
 */
export const STEP_GOALS: readonly [string, string, string, string, string] = [
  '課題の深掘りヒアリング。選択されたテーマ（例：既存顧客の離脱）について「なぜそうなったと思うか」「すでに試したことはあるか」を、会話調の短い質問で1〜2点に絞って聞く。回答は簡潔に。',
  '現状分析。事実やデータに基づく整理と課題の明確化を促す。',
  '解決策の提案。選択肢を簡潔に示し、優先度や実現性を聞く。',
  '実行計画の策定。具体的なアクションと期限を一緒に整理する。',
  'レポート作成。これまでの議論の要点をまとめ、次のアクションを確認する。',
];

/**
 * カテゴリラベルのリスト（API ルートで使用）
 * 
 * 初回メッセージの category-buttons 復元用
 */
export const CATEGORY_LABELS = [
  "売上の伸び悩み",
  "コスト削減",
  "人材・採用",
  "働き方・組織",
  "業務効率化",
  "DX推進",
  "法務・リスク",
  "その他"
] as const;

/**
 * セッション名（カテゴリラベル）→ タブ左端のアクセントカラー
 * 
 * SessionTabs コンポーネントで使用され、各セッションのカテゴリを視覚的に区別する
 */
export const CATEGORY_ACCENT_MAP: Record<string, string> = {
  "売上の伸び悩み": "bg-red-500",
  "コスト削減": "bg-green-500",
  "人材・採用": "bg-blue-500",
  "働き方・組織": "bg-purple-500",
  "業務効率化": "bg-yellow-500",
  "DX推進": "bg-indigo-500",
  "法務・リスク": "bg-amber-500",
  "その他": "bg-gray-500",
};

/**
 * カテゴリ → サブカテゴリのマッピング
 * 
 * ユーザーがカテゴリを選択後、詳細な課題を選択するために使用
 * handleQuickReply 内で参照される
 */
export const SUBCATEGORY_MAP: Record<string, string[]> = {
  "売上の伸び悩み": [
    "新規顧客獲得が低調",
    "既存顧客の離脱",
    "単価の低下",
    "市場シェアの減少"
  ],
  "コスト削減": [
    "人件費の最適化",
    "設備維持費の削減",
    "在庫管理の改善",
    "業務効率化"
  ],
  "人材・採用": [
    "採用がうまくいかない",
    "定着しない・離職が増えた",
    "育成に悩んでいる",
    "採用コストを抑えたい"
  ],
  "働き方・組織": [
    "リモート・ハイブリッド運用",
    "コミュニケーション不足",
    "評価制度の見直し",
    "チーム編成・役割分担"
  ],
  "業務効率化": [
    "属人化を解消したい",
    "手作業が多く時間が足りない",
    "ツール・システム選定",
    "業務の見える化"
  ],
  "DX推進": [
    "デジタル戦略の策定",
    "レガシーシステムの刷新",
    "データ活用基盤の構築",
    "AI/MLの導入"
  ],
  "法務・リスク": [
    "契約・法務の相談",
    "コンプライアンス対応",
    "情報セキュリティ",
    "リスク対策・BCP"
  ]
};
